<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Animate with Swagger (and Stagger)</title>
  <meta name="description" content="Animations make the web a far more interesting place. In this post, we’ll learn how to roll our own staggered list animation with Vanilla JS and CSS. No fram...">
  <meta property="og:description" content="Animations make the web a far more interesting place. In this post, we’ll learn how to roll our own staggered list animation with Vanilla JS and CSS. No fram...">
  <meta property="og:image" content="/assets/img/playbook-og.png" />
  <script type="text/javascript">
  !function(e,t,n,a,c,l,m,o,d,f,h,i){c[l]&&(d=e.createElement(t),d[n]=c[l],e[a]("head")[0].appendChild(d),e.documentElement.className+=" wf-cached"),function s(){for(d=e[a](t),f="",h=0;h<d.length;h++)i=d[h][n],i.match(m)&&(f+=i);f&&(c[l]="/**/"+f),setTimeout(s,o+=o)}()}(document,"style","innerHTML","getElementsByTagName",localStorage,"tk",/^@font|^\.tk-/,100);
</script>

  <script>
  (function(d) {
    var config = {
      kitId: 'pyj3iso',
      scriptTimeout: 3000,
      async: false
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>


  <link rel="shortcut icon" type="image/x-icon" href="/prototyping-playbook/favicon.ico">
  <link rel="stylesheet" href="/prototyping-playbook/assets/main.css">
  <link rel="canonical" href="/prototyping-playbook/staggered-animations">
  <link rel="alternate" type="application/rss+xml" title="Prototyping Playbook" href="/prototyping-playbook/feed.xml">

  
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98584881-1', 'auto');
  ga('send', 'pageview');

</script>

  
</head>

  <body>
    <nav class="pv3 pt5-l relative">
  <div class="mw8 center ph3 ph5-l flex items-center justify-between">
    <a class="link color-inherit hover-red" href="/prototyping-playbook/">
      <figure class="logo ma0">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M55.3,49.3c17.7,0,32-14.4,32-32v-3.7l4.9,4.9c1.3,1.3,3.7,1.3,5,0c0.7-0.7,1-1.6,1-2.5c0-0.9-0.4-1.8-1-2.5l-11-11  c-1.3-1.3-3.5-1.3-4.9-0.1l-11.8,11c-0.7,0.6-1.1,1.5-1.1,2.5c0,0.9,0.3,1.8,0.9,2.5c1.3,1.4,3.6,1.5,5,0.2l6-5.5v4.3  c0,13.8-11.2,25-25,25H43.4C27,42.3,13,55,11.5,71.3l0,0.4l-0.4,0.1c-5.7,1.7-9.6,6.9-9.6,12.8c0,7.4,6,13.4,13.4,13.4  c7.4,0,13.4-6,13.4-13.4c0-5.7-3.7-10.8-9.2-12.7l-0.5-0.2l0.1-0.5c1.5-12.5,12.1-22,24.7-22H55.3z M21.3,84.7  c0,3.5-2.9,6.4-6.4,6.4c-3.5,0-6.4-2.9-6.4-6.4c0-3.5,2.9-6.4,6.4-6.4C18.4,78.3,21.3,81.2,21.3,84.7z"/><path d="M76.6,85.7l-5.7-5.4l5.7-5.4c0.7-0.7,1.1-1.5,1.1-2.5s-0.3-1.8-1-2.5c-1.3-1.4-3.6-1.4-5-0.1l-5.9,5.6l-5.9-5.6  c-1.4-1.3-3.7-1.3-5,0.1c-0.7,0.7-1,1.6-1,2.5c0,0.9,0.4,1.8,1.1,2.5l5.7,5.4L55,85.7c-1.4,1.3-1.5,3.6-0.1,5c1.3,1.4,3.6,1.4,5,0.1  l5.9-5.6l5.9,5.6c1.3,1.3,3.7,1.2,5-0.1C78,89.3,78,87.1,76.6,85.7z"/><path d="M41.9,23.4L36.3,18l5.7-5.4c1.4-1.3,1.5-3.6,0.1-5c-1.3-1.4-3.6-1.4-5-0.1l-5.9,5.6l-5.9-5.6c-1.4-1.3-3.7-1.3-5,0.1  c-1.3,1.4-1.3,3.6,0.1,5L26,18l-5.7,5.4c-0.7,0.7-1.1,1.5-1.1,2.5c0,0.9,0.3,1.8,1,2.5c1.3,1.4,3.6,1.4,5,0.1l5.9-5.6l5.9,5.6  c1.3,1.3,3.7,1.2,5-0.1c0.7-0.7,1-1.6,1-2.5C43,24.9,42.6,24.1,41.9,23.4z"/></svg>

      </figure>
    </a>
    <a class="link red fw6 flex items-center" href="https://github.com/mattrothenberg/prototyping-playbook" target="_blank">
      <span class="h1 w1 mr2">
        <svg class="icon-octocat" aria-hidden="true" version="1.1" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>

      </span>
      GitHub
    </a>
  </div>
</nav>

    <main class="mw8 center pa3 pa5-l" aria-label="Content">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="mb4 mb5-l" itemprop="name headline">
    
    <h2 class="mt0 mb1 fw9 ttu f6 tracked-1 red o-70">12 May 2017</h2>
    <h1 class="f3 mt0 mb2 lh-title fw6 red">
      Animate with Swagger (and Stagger)
    </h1>
    <ul class="list mt3 mb0 pl0">
      
        <li class="dib ttu dark-gray f7 fw6 tracked-1 bg-washed-red red pv1 ph2 mr2">Vanilla JS</li>
      
    </ul>
  </header>

  <div class="lh-copy f4 measure-wide center serif" itemprop="articleBody">
    <p>Animations make the web a far more interesting place. In this post, we’ll learn how to roll our own staggered list animation with Vanilla JS and CSS. No frameworks or plugins. 60 frames-per-second or bust!</p>

<h2 id="scenario">Scenario</h2>

<p>You’re building a health and fitness web application, and you’d like to enhance the UI by adding animation. You’ve designed a step-count leaderboard, but want each list item to fade in one after the other (staggering between each iteration).</p>

<h2 id="mockup">Mockup</h2>

<div style="width:100%;height:0px;position:relative;padding-bottom:56.237%;"><iframe src="https://streamable.com/s/kts6b/rcvaxo" frameborder="0" width="100%" height="100%" allowfullscreen="" style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe></div>

<h2 id="rundown">Rundown</h2>

<h3 id="designing--animating-the-bars">Designing &amp; Animating The Bars</h3>

<p>From a design perspective, we’re building a horizontal bar chart (sorted by longest to shortest). Each bar has a dynamic <strong>width</strong>, a fake <strong>name</strong>, and a fake <strong>step count</strong>. Instead of hard-coding each bar’s width as an inline style, we’ll assign a custom <code class="highlighter-rouge">data-width</code> attribute that can be read in our Javascript.</p>

<div>
  <pre data-line=""><code class="language-html">&lt;div
    data-width=&quot;100&quot;
    class=&quot;bar mb2 h2 br4 flex items-center justify-between pr3&quot;&gt;
    &lt;h1 class=&quot;name mv0 fw6 f7 white&quot;&gt;
      &lt;!-- Name to be set via Javascript --&gt;
    &lt;/h1&gt;
    &lt;h2 class=&quot;steps mv0 fw4 f7 white-50&quot;&gt;
      &lt;!-- Steps to be set via Javascript --&gt;
    &lt;/h2&gt;
  &lt;/div&gt;</code></pre>
</div>

<p>Where the magic happens, though, is the CSS for our <code class="highlighter-rouge">.bar</code> class. We apply a gradient to make it look pretty, and add a keyframe animation that tweens the bar from zero to full opacity.</p>

<p>You’ll note that we’re omitting both the <code class="highlighter-rouge">animation-duration</code> and the <code class="highlighter-rouge">animation-delay</code> property from our CSS. In the next step, you’ll see how we can use Javascript to add these values dynamically and give our animation a wonderful “staggered” effect.</p>

<p><strong>NB: You don’t need Javascript to achieve this effect. Sass / SCSS can help you get the same outcome</strong></p>

<div>
  <pre data-line=""><code class="language-css">.bar {
  animation: grow-bar cubic-bezier(0.23, 1, 0.32, 1) forwards;
  background: linear-gradient(to left, #004e92, #000428);
  opacity: 0;
}

@keyframes grow-bar {
  0% {
    width: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}</code></pre>
</div>

<p>In our Javascript, we’re iterating over the <code class="highlighter-rouge">.bar</code> elements on the page, and performing a few actions:</p>
<ol>
  <li><strong>Read</strong> the bar’s <code class="highlighter-rouge">data-width</code> attribute and <strong>set</strong> the element’s width accordingly</li>
  <li><strong>Set</strong> the bar’s <code class="highlighter-rouge">animation-duration</code> to the variable <code class="highlighter-rouge">BAR_ANIM_DURATION</code>. By creating this variable, we can adjust the speed of our animation (for debugging/fine-tuning) by tweaking one variable.</li>
  <li><strong>Calculate</strong> and <strong>set</strong> a staggered animation-delay via some simple arithmetic</li>
</ol>

<p><img src="/prototyping-playbook/assets/img/posts/bar-delay.png" alt="Dynamic Animation Delay" /></p>

<p>Note that with each iteration of the <code class="highlighter-rouge">forEach</code>, loop, the <code class="highlighter-rouge">animation-delay</code> property increases ever-so-slightly, giving us a staggered effect. If we had hard-coded a constant value in our loop, the bars would all fade in at the exact same time.</p>

<div>
  <pre data-line=""><code class="language-js">let bars = document.querySelectorAll(&#39;.bar&#39;)
const NUM_ELEMENTS = bars.length
const BAR_ANIM_DURATION = .65

bars.forEach((bar, index) =&gt; {
  // Read &#39;data-width&#39; and set the bar&#39;s width
  bar.style.width = `${bar.getAttribute(&#39;data-width&#39;)}%`

  // Set &#39;animation-duration&#39;
  bar.style.animationDuration = `${BAR_ANIM_DURATION}s`

  // Calculate Staggered Delay
  let barDelay = index * (BAR_ANIM_DURATION / NUM_ELEMENTS)

  // Set Staggered Delay
  bar.style.animationDelay = `${barDelay}s`
})</code></pre>
</div>

<h3 id="animating-the-names">Animating The Names</h3>

<p>We’ll take a similar approach to animate the names inside of each bar. In our CSS, let’s add another keyframe animation that tweens each name from zero to full opacity, and moves it to a neutral X position.</p>

<div>
  <pre data-line=""><code class="language-css">.name {
  animation: slide-name ease forwards;
  opacity: 0;
}

@keyframes slide-name {
  0% {
    transform: translateX(-25px);
  }

  100% {
    opacity: 1;
    transform: translateX(0px);
  }
}</code></pre>
</div>

<p>As mentioned before, we can leverage our ability to <a href="/prototyping-playbook/fake-it-til-you-make-it" target="_blank">work with fake data</a> to assign a random name to each bar. Moreover, we can perform a similar calculation to stagger the animation of each name element.</p>

<div>
  <pre data-line=""><code class="language-js">// Animate names quicker than bars
const NAME_ANIM_DURATION = .25

bars.forEach((bar, index) =&gt; {
  let name = bar.querySelector(&#39;.name&#39;)

  // Assign a fake name
  name.innerText = faker.name.findName()

  // Set &#39;animation-duration&#39;
  name.style.animationDuration = `${NAME_ANIM_DURATION}s`

  // Calculate Staggered Delay
  let barDelay = index * (BAR_ANIM_DURATION / NUM_ELEMENTS)
  let nameDelay = .15 + barDelay + (index * (NAME_ANIM_DURATION / NUM_ELEMENTS))

  // Set Staggered Delay
  name.style.animationDelay = `${nameDelay}s`
})</code></pre>
</div>

<h3 id="animating-the-step-counts">Animating The Step Counts</h3>

<p>By now, you should be a pro at this. Let’s add another keyframe animation that tweens each step count from zero to full opacity, and scales it up from quarter to full size.</p>

<div>
  <pre data-line=""><code class="language-css">.steps {
  animation: grow-steps ease forwards;
  opacity: 0;
}

@keyframes grow-steps {
  0% {
    transform: scale(.25);
  }

  100% {
    opacity: 1;
    transform: scale(1);
  }
}</code></pre>
</div>

<p>And in our Javascript, let’s perform that same calculation to create a staggered animation delay.</p>

<div>
  <pre data-line=""><code class="language-js">const STEPS_ANIM_DURATION = .25

bars.forEach((bar, index) =&gt; {
  let steps = bar.querySelector(&#39;.steps&#39;)

  // Add a bogus step count
  steps.innerText = (NUM_ELEMENTS - index) * 1000

  // Set &#39;animation-duration&#39;
  steps.style.animationDuration = `${STEPS_ANIM_DURATION}s`

  // Calculate Staggered Delay
  let barDelay = index * (BAR_ANIM_DURATION / NUM_ELEMENTS)
  let nameDelay = .15 + barDelay + (index * (NAME_ANIM_DURATION / NUM_ELEMENTS))
  let stepsDelay = nameDelay + (index * (STEPS_ANIM_DURATION / NUM_ELEMENTS))

  // Set Staggered Delay
  steps.style.animationDelay = `${stepsDelay}s`
})</code></pre>
</div>

<p data-height="500" data-theme-id="dark" data-slug-hash="QvrwPW" data-default-tab="result" data-user="mattrothenberg" data-embed-version="2" data-pen-title="QvrwPW" data-preview="true" class="codepen">See the Pen <a href="http://codepen.io/mattrothenberg/pen/QvrwPW/">QvrwPW</a> by Matt Rothenberg (<a href="http://codepen.io/mattrothenberg">@mattrothenberg</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async="" src="https://production-assets.codepen.io/assets/embed/ei.js"></script>


  </div>
  <script src="/prototyping-playbook/assets/vendor/prism.js" type="text/javascript"></script>
</article>

    </main>
  </body>
</html>
